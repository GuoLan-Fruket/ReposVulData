{"index": 7123, "cve_id": "CVE-2021-4170", "cwe_id": ["CWE-79"], "cve_language": "Python", "cve_description": "calibre-web is vulnerable to Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')", "cvss": "5.4", "publish_date": "January 16, 2022", "AV": "NETWORK", "AC": "NETWORK", "PR": "LOW", "UI": "REQUIRED", "S": "CHANGED", "C": "LOW", "I": "LOW", "A": "NONE", "commit_id": "7ad419dc8c12180e842a82118f4866ac3d074bc5", "commit_message": "Fix upload of cover and book formats containing html characters", "commit_date": "2021-11-20T12:40:23Z", "project": "janeczku/calibre-web", "url": "https://api.github.com/repos/janeczku/calibre-web/commits/7ad419dc8c12180e842a82118f4866ac3d074bc5", "html_url": "https://github.com/janeczku/calibre-web/commit/7ad419dc8c12180e842a82118f4866ac3d074bc5", "windows_before": [{"commit_id": "bcdc97641447965af486964537f3821f47b28874", "commit_date": "Sat Nov 20 13:00:54 2021 +0100", "commit_message": "Added missing check for creating public shelfs", "files_name": ["cps/shelf.py"]}, {"commit_id": "6aad9378b8fc8d0edf1b8754593024325d8fe456", "commit_date": "Sat Nov 20 12:44:34 2021 +0100", "commit_message": "Fix visiblility upload right on enabled upload feature", "files_name": ["cps/admin.py", "cps/templates/admin.html", "cps/templates/config_view_edit.html", "cps/templates/user_edit.html"]}, {"commit_id": "6f5390ead5df9779ac81fadefffb476e03f93548", "commit_date": "Sat Nov 20 12:17:03 2021 +0100", "commit_message": "Changed error message in case of trying to delete a shelf unauthorized Removed outcommented text", "files_name": ["cps/db.py", "cps/shelf.py"]}, {"commit_id": "d624b67e93ab76356afb352bdb8eeb536b28fcff", "commit_date": "Sat Nov 20 11:57:51 2021 +0100", "commit_message": "Fix #2174 (default sorting order now is timestamp again)", "files_name": ["cps/web.py"]}, {"commit_id": "01cc97c1b2f8277b020c0212e024c9e3f208d4ff", "commit_date": "Sat Nov 20 11:32:43 2021 +0100", "commit_message": "Added langugae support for Chol\u00f3n (fixes #2183)", "files_name": ["cps/isoLanguages.py", "cps/iso_language_names.py", "cps/translations/cs/LC_MESSAGES/messages.mo", "cps/translations/cs/LC_MESSAGES/messages.po", "cps/translations/de/LC_MESSAGES/messages.mo", "cps/translations/de/LC_MESSAGES/messages.po", "cps/translations/el/LC_MESSAGES/messages.mo", "cps/translations/el/LC_MESSAGES/messages.po", "cps/translations/es/LC_MESSAGES/messages.mo", "cps/translations/es/LC_MESSAGES/messages.po", "cps/translations/fi/LC_MESSAGES/messages.mo", "cps/translations/fi/LC_MESSAGES/messages.po", "cps/translations/fr/LC_MESSAGES/messages.mo", "cps/translations/fr/LC_MESSAGES/messages.po", "cps/translations/hu/LC_MESSAGES/messages.mo", "cps/translations/hu/LC_MESSAGES/messages.po", "cps/translations/it/LC_MESSAGES/messages.mo", "cps/translations/it/LC_MESSAGES/messages.po", "cps/translations/ja/LC_MESSAGES/messages.mo", "cps/translations/ja/LC_MESSAGES/messages.po", "cps/translations/km/LC_MESSAGES/messages.mo", "cps/translations/km/LC_MESSAGES/messages.po", "cps/translations/nl/LC_MESSAGES/messages.mo", "cps/translations/nl/LC_MESSAGES/messages.po", "cps/translations/pl/LC_MESSAGES/messages.mo", "cps/translations/pl/LC_MESSAGES/messages.po", "cps/translations/pt_BR/LC_MESSAGES/messages.mo", "cps/translations/pt_BR/LC_MESSAGES/messages.po", "cps/translations/ru/LC_MESSAGES/messages.mo", "cps/translations/ru/LC_MESSAGES/messages.po", "cps/translations/sv/LC_MESSAGES/messages.mo", "cps/translations/sv/LC_MESSAGES/messages.po", "cps/translations/tr/LC_MESSAGES/messages.mo", "cps/translations/tr/LC_MESSAGES/messages.po", "cps/translations/uk/LC_MESSAGES/messages.mo", "cps/translations/uk/LC_MESSAGES/messages.po", "cps/translations/zh_Hans_CN/LC_MESSAGES/messages.mo", "cps/translations/zh_Hans_CN/LC_MESSAGES/messages.po", "cps/translations/zh_Hant_TW/LC_MESSAGES/messages.mo", "cps/translations/zh_Hant_TW/LC_MESSAGES/messages.po", "messages.pot"]}, {"commit_id": "8e5bb02a284adcdc3d7bab791c8526566e847b9c", "commit_date": "Sat Nov 13 17:57:01 2021 +0400", "commit_message": "Merge author rename", "files_name": ["cps/db.py", "cps/editbooks.py", "cps/helper.py", "cps/opds.py", "cps/ub.py", "cps/web.py"]}, {"commit_id": "4fd4cf43554a5dc81b62151d31731a144b376f0c", "commit_date": "Sat Nov 13 17:41:16 2021 +0400", "commit_message": "Merge branch 'master' into Develop", "files_name": ["baba205bcedcf87c5317db04d263b4570ed10f27 - Thu Nov 11 18:46:32 2021 +0400 : Rename everything on rename authors", "cps/editbooks.py", "cps/helper.py"]}, {"commit_id": "7c016265d2bcc4c67dbd02bbba8fb2c9963dfd6a", "commit_date": "Wed Nov 10 08:59:23 2021 -0500", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["974549b1af7addc84b8012926f03188ec74b625d - Mon Nov 8 20:36:41 2021 +0400 : Removed technosoft2000 docker container", ".github/ISSUE_TEMPLATE/bug_report.md"]}, {"commit_id": "add502d23697ff5c0664c2ffaae02e7b50fbd9bd", "commit_date": "Sun Nov 7 20:18:33 2021 +0400", "commit_message": "Fix opds search and opds list of read books", "files_name": ["cps/db.py", "cps/web.py"]}, {"commit_id": "294c594cbbe6c8cdf85aca00ae6bd2dc2a8a79d3", "commit_date": "Sat Nov 6 14:19:37 2021 -0400", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["60aa016734970ef31cce784306f5cbac53bbbe22 - Sat Nov 6 21:17:48 2021 +0400 : Handling of missing required dependency during dependency check", "cps/__init__.py", "cps/about.py", "cps/dep_check.py"]}, {"commit_id": "27e8fbd248a52c5546f801c483973439586d53e2", "commit_date": "Sat Nov 6 20:17:00 2021 +0400", "commit_message": "Show dependencies in about section from automatic dependency check Bugfix and refactored dependency check Added output of googledrive dependencies as fallback option", "files_name": ["cps/about.py", "cps/dep_check.py", "cps/editbooks.py", "cps/gdriveutils.py", "cps/uploader.py"]}, {"commit_id": "d856c4d78efa09d77df71d33a8a30c875f0216b2", "commit_date": "Thu Nov 4 14:00:51 2021 -0400", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["25b09a532ffc35deff1ff76220a7a8d94bbf75bf - Thu Nov 4 21:23:02 2021 +0400 : Fixed missing handle_error in convert calibre task (database readonly case)", "cps/tasks/convert.py"]}, {"commit_id": "c1f4ca36b6d49d4cb7aed27552447a675692eed4", "commit_date": "Thu Nov 4 20:50:48 2021 +0400", "commit_message": "Current sorting order visible in all sidebar selectors, and search results Sorting \"hot\" books only ascending and descending according to download numbers Downloaded books sorting according to authors name working", "files_name": ["cps/db.py", "cps/templates/author.html", "cps/templates/index.html", "cps/templates/search.html", "cps/web.py"]}, {"commit_id": "58379159fb6cd711f5454578fb6ee8a9004534f3", "commit_date": "Thu Nov 4 17:32:31 2021 +0400", "commit_message": "Fix shown cover in series grid view (#979)", "files_name": ["cps/templates/grid.html", "cps/web.py"]}, {"commit_id": "17470b3b563b9537fa3d9f714de4ec232af3498d", "commit_date": "Thu Nov 4 16:38:55 2021 +0400", "commit_message": "Check versions of dependencies at startup and generate logfile output if not fitting (#2157)", "files_name": ["cps/__init__.py", "cps/dep_check.py", "optional-requirements.txt"]}, {"commit_id": "42cc13d1e2c09c87047518453f00f55318d1afc8", "commit_date": "Wed Nov 3 21:07:16 2021 +0400", "commit_message": "Mark which functions are selected on list pages", "files_name": ["cps/static/js/filter_grid.js", "cps/static/js/filter_list.js", "cps/templates/grid.html", "cps/templates/list.html"]}, {"commit_id": "ecc5cb167e1a584994861d52f206f82d92bbb33f", "commit_date": "Wed Nov 3 20:32:17 2021 +0400", "commit_message": "Upload setting in user template only visible if upload enabled Delete book setting only visible if edit book setting is ticked", "files_name": ["cps/templates/config_view_edit.html", "cps/templates/user_edit.html"]}, {"commit_id": "d72210c6aedd03ee589ad06aa3ab57ec6ed049f2", "commit_date": "Wed Nov 3 19:05:24 2021 +0400", "commit_message": "Exclude upload rights visibility if upload is not activated", "files_name": ["cps/templates/admin.html", "cps/templates/user_edit.html"]}, {"commit_id": "61deda107629214e7e7eebdaa759cdb526d52128", "commit_date": "Wed Nov 3 18:29:30 2021 +0400", "commit_message": "Updated security history", "files_name": ["SECURITY.md"]}, {"commit_id": "1e0ff0f9c2cd3ddbdb8c3d846730606fc0b0fd5c", "commit_date": "Wed Nov 3 18:16:15 2021 +0400", "commit_message": "Fix #2045 (\"fetch metadata\" update appends to the existing tags instead or replacing them)", "files_name": ["cps/static/js/get_meta.js"]}, {"commit_id": "00bf1f5ec952e11f9f15bb9c09cff51fb706480d", "commit_date": "Tue Nov 2 14:25:46 2021 -0400", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["2b6f5b15651748c601818186ebef8948eadfb983 - Tue Nov 2 21:32:29 2021 +0400 : Fix csrf check in list pages", "cps/templates/list.html"]}, {"commit_id": "e5abc5f281cd9a081d1f216bd93ee1ad98573a21", "commit_date": "Tue Nov 2 13:09:59 2021 -0400", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["95371d0d7f22479f20cf764ed5e9b94dc37f4f28 - Tue Nov 2 20:27:50 2021 +0400 : Fix shelf grid ordering for inverted order at page load Ordering buttons now visible on medium size screens", "cps/static/js/filter_grid.js", "cps/templates/author.html", "cps/templates/grid.html", "cps/templates/index.html", "cps/templates/list.html", "cps/templates/search.html", "cps/templates/shelf.html"]}, {"commit_id": "c7df8a1a344f9b63783eb2b96cb27e1817887920", "commit_date": "Tue Nov 2 18:57:28 2021 +0400", "commit_message": "Fix missing csrf token in series grid view", "files_name": ["cps/templates/grid.html"]}, {"commit_id": "b414d9196417872d5bca443fee09d0a6e6c9efb0", "commit_date": "Tue Nov 2 18:55:56 2021 +0400", "commit_message": "Fix for #2162 (Epub viewer isn't displaying images)", "files_name": ["cps/web.py"]}, {"commit_id": "82164fc8e7537c370734c8aa5974b777abaecdee", "commit_date": "Mon Nov 1 10:00:18 2021 -0400", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["a5415e00d54788cc32702b9a2793015281a34c22 - Mon Nov 1 13:11:49 2021 +0100 : Fix grid to list in series view Fix sort asc, desc in author and series list", "cps/static/js/filter_grid.js", "cps/static/js/filter_list.js", "cps/templates/grid.html", "cps/web.py"]}, {"commit_id": "434029270b78e411ee0b7df036b0b49746b24d96", "commit_date": "Sun Oct 31 20:42:21 2021 -0400", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["b3b85bf692e75b8bd41a5cd2dcffacc12782da63 - Sun Oct 31 16:33:35 2021 +0100 : Fix position read mark in standard theme", "cps/static/css/style.css"]}, {"commit_id": "a36c6da3ae90313c5f66771fa00a7f34f1db687e", "commit_date": "Sun Oct 31 16:30:51 2021 +0100", "commit_message": "Fix position read mark in standard theme", "files_name": ["cps/static/css/style.css"]}, {"commit_id": "9e72c3b40d19e342ec10ac737e7d291fe02685d1", "commit_date": "Sun Oct 31 16:18:27 2021 +0100", "commit_message": "Fix position read mark in standard theme", "files_name": ["cps/static/css/style.css"]}, {"commit_id": "a0cebfbfb17907373edd1fab37eef748c3baddcd", "commit_date": "Sun Oct 31 08:29:27 2021 -0400", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["64e833f5d6554029a5d30223d144bb6ba48895ad - Sun Oct 31 11:56:38 2021 +0100 : Updated readme Version Bump", "README.md", "cps/constants.py"]}, {"commit_id": "4da64ceb23e69da3953f9c454ea261d9d0621e25", "commit_date": "Sun Oct 31 11:31:53 2021 +0100", "commit_message": "Update to version 0.6.14", "files_name": ["SECURITY.md", "cps/constants.py", "optional-requirements.txt", "setup.cfg", "test/Calibre-Web TestSummary_Linux.html"]}, {"commit_id": "99ec99b53910205477de5d68f7459ff9e0009899", "commit_date": "Sat Oct 30 13:28:56 2021 -0400", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["3077b854d7a53eb854804c4253f846806387e070 - Sat Oct 30 16:37:53 2021 +0200 : Merge remote-tracking branch 'de/patch-1'", "a8317d900b16eb912b1a7ea24d534376f5ae3439 - Sat Oct 30 15:50:17 2021 +0200 : Bugfix for edit custom ratings in list edit mode Bugfix for deleting custom enum in list edit mode", "cps/editbooks.py", "cps/static/js/table.js", "cps/templates/book_table.html"]}, {"commit_id": "668bf3a15e98dd1cc3500dfb0733aa0e05588229", "commit_date": "Sat Oct 30 13:41:33 2021 +0200", "commit_message": "Fix typo in german translation", "files_name": ["cps/translations/de/LC_MESSAGES/messages.po"]}, {"commit_id": "481e52b503585f3aaeb6755286218962008103a5", "commit_date": "Sat Oct 30 09:56:39 2021 +0200", "commit_message": "Removed technosoft2000 docker reference", "files_name": ["README.md"]}, {"commit_id": "bbb65ec80413881f05b29dfe64482c4ad87b8418", "commit_date": "Sat Oct 30 09:40:04 2021 +0200", "commit_message": "Merge remote-tracking branch 'trustedhost/master'", "files_name": ["4b7b646692a6fd0eca8d5a04391e7336d5fe03d4 - Sat Oct 30 09:36:48 2021 +0200 : Merge remote-tracking branch 'autocap/patch-1'"]}], "windows_after": [{"commit_id": "5ede0794018bfb54af58aaa7b08bd7d6a3972d9a", "commit_date": "Sat Nov 20 13:45:41 2021 +0100", "commit_message": "Handling of invalid cover files on upload", "files_name": ["cps/helper.py"]}, {"commit_id": "2989586c6ddfca9d5af17d795ae1b76a1ac4cc0c", "commit_date": "Sat Nov 20 18:54:38 2021 -0500", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["927384306223e1be94b1fc205bee2b69a67b32cf - Sun Nov 21 09:13:26 2021 +0100 : Removed double declared functions", "cps/ub.py"]}, {"commit_id": "6deb5277692dca38873db334d0cdc7d44bad0703", "commit_date": "Sun Nov 21 09:14:36 2021 +0100", "commit_message": "Merge branch 'master' into Develop", "files_name": ["642af2f973a3fb5800f8760d02d84a7847d8f3d3 - Sun Nov 21 09:28:03 2021 +0100 : Added support for missing locale Enu", "cps/iso_language_names.py", "cps/translations/cs/LC_MESSAGES/messages.mo", "cps/translations/cs/LC_MESSAGES/messages.po", "cps/translations/de/LC_MESSAGES/messages.mo", "cps/translations/de/LC_MESSAGES/messages.po", "cps/translations/el/LC_MESSAGES/messages.mo", "cps/translations/el/LC_MESSAGES/messages.po", "cps/translations/es/LC_MESSAGES/messages.mo", "cps/translations/es/LC_MESSAGES/messages.po", "cps/translations/fi/LC_MESSAGES/messages.mo", "cps/translations/fi/LC_MESSAGES/messages.po", "cps/translations/fr/LC_MESSAGES/messages.mo", "cps/translations/fr/LC_MESSAGES/messages.po", "cps/translations/hu/LC_MESSAGES/messages.mo", "cps/translations/hu/LC_MESSAGES/messages.po", "cps/translations/it/LC_MESSAGES/messages.mo", "cps/translations/it/LC_MESSAGES/messages.po", "cps/translations/ja/LC_MESSAGES/messages.mo", "cps/translations/ja/LC_MESSAGES/messages.po", "cps/translations/km/LC_MESSAGES/messages.mo", "cps/translations/km/LC_MESSAGES/messages.po", "cps/translations/nl/LC_MESSAGES/messages.mo", "cps/translations/nl/LC_MESSAGES/messages.po", "cps/translations/pl/LC_MESSAGES/messages.mo", "cps/translations/pl/LC_MESSAGES/messages.po", "cps/translations/pt_BR/LC_MESSAGES/messages.mo", "cps/translations/pt_BR/LC_MESSAGES/messages.po", "cps/translations/ru/LC_MESSAGES/messages.mo", "cps/translations/ru/LC_MESSAGES/messages.po", "cps/translations/sv/LC_MESSAGES/messages.mo", "cps/translations/sv/LC_MESSAGES/messages.po", "cps/translations/tr/LC_MESSAGES/messages.mo", "cps/translations/tr/LC_MESSAGES/messages.po", "cps/translations/uk/LC_MESSAGES/messages.mo", "cps/translations/uk/LC_MESSAGES/messages.po", "cps/translations/zh_Hans_CN/LC_MESSAGES/messages.mo", "cps/translations/zh_Hans_CN/LC_MESSAGES/messages.po", "cps/translations/zh_Hant_TW/LC_MESSAGES/messages.mo", "cps/translations/zh_Hant_TW/LC_MESSAGES/messages.po", "messages.pot"]}, {"commit_id": "6cb713d62c2662b51765a6b52b98e7b193e02d92", "commit_date": "Sun Nov 21 10:21:45 2021 +0100", "commit_message": "Added filtering of languages Bugfix show all allowed languages in user settings in case restrictions currently apply", "files_name": ["cps/admin.py", "cps/db.py", "cps/templates/languages.html", "cps/web.py"]}, {"commit_id": "1e9d88fa98af1626678e59022461cf917f23059d", "commit_date": "Sun Nov 21 10:22:44 2021 +0100", "commit_message": "Merge branch 'master' into Develop", "files_name": ["1b8bd27b3cd57ef0d1b4207169b4744b0570dfe0 - Sat Nov 20 13:53:49 2021 +0100 : Added cve number for csrf bug", "SECURITY.md"]}, {"commit_id": "cbb9edac1950e5d4c50c9b719a74a2914f440f80", "commit_date": "Sun Nov 21 13:23:27 2021 +0100", "commit_message": "Bugfix search in books list Fix renaming upper to lowercase letters Update test results", "files_name": ["cps/editbooks.py", "cps/web.py", "test/Calibre-Web TestSummary_Linux.html"]}, {"commit_id": "f58c5bee1cd44cd288c274c5294469bd36c07335", "commit_date": "Sun Nov 21 09:23:52 2021 -0500", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["e880238cb9765f03ae0627c4478b5637d17dbd18 - Sun Nov 21 16:19:32 2021 +0100 : Add missing filter for current user in KoboSyncedBooks queries", "cps/kobo.py", "cps/kobo_sync_status.py"]}, {"commit_id": "d084a06e635b7228279e308aeb5ba5dddafa4502", "commit_date": "Sun Nov 21 16:21:27 2021 +0100", "commit_message": "Bugfix create shelf for users not allowed to create public shelfs", "files_name": ["cps/shelf.py"]}, {"commit_id": "2e0d0a24290e024b1dc6332f138872b706478207", "commit_date": "Sun Nov 21 18:31:35 2021 +0100", "commit_message": "Update requirements", "files_name": ["optional-requirements.txt", "requirements.txt", "setup.cfg"]}, {"commit_id": "fc859afb920277f3c528fb56bdc52850de15a405", "commit_date": "Mon Nov 22 09:59:36 2021 -0500", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["a1d372630d6be75f9df5eac90ea2bda53a42dd0a - Tue Nov 23 19:32:11 2021 +0100 : Added missing language bit (fixes #2187) Added handling of wrong .jpg cover file content Guest sorting options are now stored in the session Updated teststatus", "cps/helper.py", "cps/iso_language_names.py", "cps/translations/cs/LC_MESSAGES/messages.mo", "cps/translations/cs/LC_MESSAGES/messages.po", "cps/translations/de/LC_MESSAGES/messages.mo", "cps/translations/de/LC_MESSAGES/messages.po", "cps/translations/el/LC_MESSAGES/messages.mo", "cps/translations/el/LC_MESSAGES/messages.po", "cps/translations/es/LC_MESSAGES/messages.mo", "cps/translations/es/LC_MESSAGES/messages.po", "cps/translations/fi/LC_MESSAGES/messages.mo", "cps/translations/fi/LC_MESSAGES/messages.po", "cps/translations/fr/LC_MESSAGES/messages.mo", "cps/translations/fr/LC_MESSAGES/messages.po", "cps/translations/hu/LC_MESSAGES/messages.mo", "cps/translations/hu/LC_MESSAGES/messages.po", "cps/translations/it/LC_MESSAGES/messages.mo", "cps/translations/it/LC_MESSAGES/messages.po", "cps/translations/ja/LC_MESSAGES/messages.mo", "cps/translations/ja/LC_MESSAGES/messages.po", "cps/translations/km/LC_MESSAGES/messages.mo", "cps/translations/km/LC_MESSAGES/messages.po", "cps/translations/nl/LC_MESSAGES/messages.mo", "cps/translations/nl/LC_MESSAGES/messages.po", "cps/translations/pl/LC_MESSAGES/messages.mo", "cps/translations/pl/LC_MESSAGES/messages.po", "cps/translations/pt_BR/LC_MESSAGES/messages.mo", "cps/translations/pt_BR/LC_MESSAGES/messages.po", "cps/translations/ru/LC_MESSAGES/messages.mo", "cps/translations/ru/LC_MESSAGES/messages.po", "cps/translations/sv/LC_MESSAGES/messages.mo", "cps/translations/sv/LC_MESSAGES/messages.po", "cps/translations/tr/LC_MESSAGES/messages.mo", "cps/translations/tr/LC_MESSAGES/messages.po", "cps/translations/uk/LC_MESSAGES/messages.mo", "cps/translations/uk/LC_MESSAGES/messages.po", "cps/translations/zh_Hans_CN/LC_MESSAGES/messages.mo", "cps/translations/zh_Hans_CN/LC_MESSAGES/messages.po", "cps/translations/zh_Hant_TW/LC_MESSAGES/messages.mo", "cps/translations/zh_Hant_TW/LC_MESSAGES/messages.po", "cps/ub.py", "messages.pot", "test/Calibre-Web TestSummary_Linux.html"]}, {"commit_id": "fcd2b683596b33c1d44eb9af4d98daa403485bcc", "commit_date": "Tue Nov 23 13:59:43 2021 -0500", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["a8689ae26beaee6fb6e3ff2f16d5289b0bf9a2a0 - Wed Nov 24 19:41:07 2021 +0000 : first commit", "cps/static/css/kthoom.css", "cps/static/js/kthoom.js", "cps/templates/readcbr.html"]}, {"commit_id": "7fc04b353bdff5236d79037768e2d676afc9501f", "commit_date": "Wed Nov 24 20:22:10 2021 +0000", "commit_message": "Selecting Position will not scroll the current image up", "files_name": ["cps/static/js/kthoom.js"]}, {"commit_id": "3f56f0dca75bb6b059289913cab61de740b4cc2f", "commit_date": "Thu Nov 25 01:30:20 2021 -0300", "commit_message": "Removed parameter that was wrongly added", "files_name": ["cps/static/js/kthoom.js"]}, {"commit_id": "ec7c2db9712a0598474e854a13746088700522a7", "commit_date": "Sat Nov 27 12:26:28 2021 +0100", "commit_message": "Added package variable for generating \"exe\" file with pyinstaller", "files_name": ["cps/__init__.py"]}, {"commit_id": "7f9da94a18daadb9e6b4c9cede41667a1402b5af", "commit_date": "Wed Nov 24 17:35:09 2021 +0100", "commit_message": "Tie visibility of upload buttons to upload right only", "files_name": ["cps/editbooks.py", "cps/templates/book_edit.html", "cps/templates/config_edit.html", "cps/templates/layout.html", "test/Calibre-Web TestSummary_Linux.html"]}, {"commit_id": "87e526642cbbb2491ecdcf6c616479481ca817d0", "commit_date": "Sat Nov 27 18:19:25 2021 +0100", "commit_message": "Bugfix edit series_index Bugfix invalid languages", "files_name": ["cps/editbooks.py"]}, {"commit_id": "2252d661c06d77a6cef8b46ee5f30f0d330c79c3", "commit_date": "Sat Nov 27 14:06:36 2021 -0500", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["67e37215305e5546441c99b2f582b5cf5d1af030 - Wed Dec 1 11:28:03 2021 +0800 : fix(tinymce Simplified Chinese locale):rename zh_CN to zh_Hans_CN", "cps/static/js/libs/tinymce/langs/zh_Hans_CN.js"]}, {"commit_id": "8438b2a07b309ab0d2ce22ea2a8cbe1ad0336a1b", "commit_date": "Wed Dec 1 12:14:57 2021 +0800", "commit_message": "Update Simplified Chinese translation", "files_name": ["cps/translations/zh_Hans_CN/LC_MESSAGES/messages.po", "messages.pot"]}, {"commit_id": "3f913133037de44942aa08098425986d91ad979f", "commit_date": "Tue Nov 30 22:24:34 2021 -0600", "commit_message": "Update epub.js", "files_name": ["cps/static/js/reading/epub.js"]}, {"commit_id": "66874f8163ef3199bc33c9888f3857475a524587", "commit_date": "Tue Nov 30 22:25:45 2021 -0600", "commit_message": "Update read.html", "files_name": ["cps/templates/read.html"]}, {"commit_id": "7640ac1b3b8c86175fc0c608925be0f620e990d3", "commit_date": "Wed Dec 1 20:29:05 2021 +0100", "commit_message": "Books are removed from synced books upon archiving (from kobo or calibre-web side) unicode texts (title, author) are showing up right on kobo reader Added some missing kobo routes (prevents 404 response) Added a lot of debug output on kobo sync requests", "files_name": ["cps/kobo.py", "cps/web.py"]}, {"commit_id": "5ed3b1cf5351f4cb06f225b6c535bcb8c652b96c", "commit_date": "Wed Dec 1 21:38:43 2021 +0100", "commit_message": "On master: Order of language count in /language (fixes #2200)", "files_name": ["cps/db.py", "cps/isoLanguages.py", "cps/templates/languages.html", "cps/web.py"]}, {"commit_id": "7598dfe952ef2c2ebbc3efa1fd255c85a3bda634", "commit_date": "Wed Dec 1 16:17:14 2021 -0500", "commit_message": "Merge branch 'master' of https://github.com/janeczku/calibre-web", "files_name": ["3ac08a8c0df1f4a70d6b3ca600a9a88fe06ae092 - Thu Dec 2 18:20:14 2021 +0000 : After toggling fullscreen, focus on main container", "cps/static/js/kthoom.js"]}, {"commit_id": "e2eab808c08f7af3c0caa74a98e4fa4d92cb0617", "commit_date": "Thu Dec 2 18:20:27 2021 +0000", "commit_message": "Merge branch 'long_strip_cbrreader' of github.com:GarckaMan/calibre-web into long_strip_cbrreader", "files_name": ["f4096b136ecf2c7eeee741a02741cd903ac3a86e - Sat Dec 4 10:57:53 2021 +0100 : Added chinese sign language (csl) to supported languages", "cps/iso_language_names.py", "cps/translations/cs/LC_MESSAGES/messages.mo", "cps/translations/cs/LC_MESSAGES/messages.po", "cps/translations/de/LC_MESSAGES/messages.mo", "cps/translations/de/LC_MESSAGES/messages.po", "cps/translations/el/LC_MESSAGES/messages.mo", "cps/translations/el/LC_MESSAGES/messages.po", "cps/translations/es/LC_MESSAGES/messages.mo", "cps/translations/es/LC_MESSAGES/messages.po", "cps/translations/fi/LC_MESSAGES/messages.mo", "cps/translations/fi/LC_MESSAGES/messages.po", "cps/translations/fr/LC_MESSAGES/messages.mo", "cps/translations/fr/LC_MESSAGES/messages.po", "cps/translations/hu/LC_MESSAGES/messages.mo", "cps/translations/hu/LC_MESSAGES/messages.po", "cps/translations/it/LC_MESSAGES/messages.mo", "cps/translations/it/LC_MESSAGES/messages.po", "cps/translations/ja/LC_MESSAGES/messages.mo"]}], "parents": [{"commit_id_before": "bcdc97641447965af486964537f3821f47b28874", "url_before": "https://api.github.com/repos/janeczku/calibre-web/commits/bcdc97641447965af486964537f3821f47b28874", "html_url_before": "https://github.com/janeczku/calibre-web/commit/bcdc97641447965af486964537f3821f47b28874"}], "details": [{"raw_url": "https://github.com/janeczku/calibre-web/raw/7ad419dc8c12180e842a82118f4866ac3d074bc5/cps%2Fstatic%2Fjs%2Fedit_books.js", "code": "/**\n * Created by SpeedProg on 05.04.2015.\n */\n/* global Bloodhound, language, Modernizr, tinymce, getPath */\n\nif ($(\"#description\").length) {\n    tinymce.init({\n        selector: \"#description\",\n        plugins: 'code',\n        branding: false,\n        menubar: \"edit view format\",\n        language: language\n    });\n}\n\nif ($(\".tiny_editor\").length) {\n    tinymce.init({\n        selector: \".tiny_editor\",\n        plugins: 'code',\n        branding: false,\n        menubar: \"edit view format\",\n        language: language\n    });\n}\n\n$(\".datepicker\").datepicker({\n    format: \"yyyy-mm-dd\",\n    language: language\n}).on(\"change\", function () {\n    // Show localized date over top of the standard YYYY-MM-DD date\n    var pubDate;\n    var results = /(\\d{4})[-\\/\\\\](\\d{1,2})[-\\/\\\\](\\d{1,2})/.exec(this.value); // YYYY-MM-DD\n    if (results) {\n        pubDate = new Date(results[1], parseInt(results[2], 10) - 1, results[3]) || new Date(this.value);\n        $(this).next('input')\n            .val(pubDate.toLocaleDateString(language))\n            .removeClass(\"hidden\");\n    }\n}).trigger(\"change\");\n\n$(\".datepicker_delete\").click(function() {\n    var inputs = $(this).parent().siblings('input');\n    $(inputs[0]).data('datepicker').clearDates();\n    $(inputs[1]).addClass('hidden');\n});\n\n\n/*\nTakes a prefix, query typeahead callback, Bloodhound typeahead adapter\n and returns the completions it gets from the bloodhound engine prefixed.\n */\nfunction prefixedSource(prefix, query, cb, source) {\n    function async(retArray) {\n        retArray = retArray || [];\n        var matches = [];\n        for (var i = 0; i < retArray.length; i++) {\n            var obj = {name : prefix + retArray[i].name};\n            matches.push(obj);\n        }\n        cb(matches);\n    }\n    source.search(query, cb, async);\n}\n\nfunction sourceSplit(query, cb, split, source) {\n    var tokens = query.split(split);\n    var currentSource = tokens[tokens.length - 1].trim();\n\n    tokens.splice(tokens.length - 1, 1); // remove last element\n    var prefix = \"\";\n    var newSplit;\n    if (split === \"&\") {\n        newSplit = \" \" + split + \" \";\n    } else {\n        newSplit = split + \" \";\n    }\n    for (var i = 0; i < tokens.length; i++) {\n        prefix += tokens[i].trim() + newSplit;\n    }\n    prefixedSource(prefix, currentSource, cb, source);\n}\n\nvar authors = new Bloodhound({\n    name: \"authors\",\n    identify: function(obj) { return obj.name; },\n    datumTokenizer: function datumTokenizer(datum) {\n        return [datum.name];\n    },\n    queryTokenizer: Bloodhound.tokenizers.whitespace,\n    remote: {\n        url: getPath() + \"/get_authors_json?q=%QUERY\",\n        wildcard: '%QUERY',\n    },\n});\n\n$(\".form-group #bookAuthor\").typeahead(\n    {\n        highlight: true,\n        minLength: 1,\n        hint: true\n    }, {\n        name: \"authors\",\n        display: 'name',\n        source: function source(query, cb, asyncResults) {\n            return sourceSplit(query, cb, \"&\", authors);\n        }\n    }\n);\n\n\nvar series = new Bloodhound({\n    name: \"series\",\n    datumTokenizer: function datumTokenizer(datum) {\n        return [datum.name];\n    },\n    // queryTokenizer: Bloodhound.tokenizers.whitespace,\n    queryTokenizer: function queryTokenizer(query) {\n        return [query];\n    },\n    remote: {\n        url: getPath() + \"/get_series_json?q=%QUERY\",\n        wildcard: '%QUERY',\n        /*replace: function replace(url, query) {\n            return url + encodeURIComponent(query);\n        }*/\n    }\n});\n$(\".form-group #series\").typeahead(\n    {\n        highlight: true,\n        minLength: 0,\n        hint: true\n    }, {\n        name: \"series\",\n        displayKey: \"name\",\n        source: series\n    }\n);\n\nvar tags = new Bloodhound({\n    name: \"tags\",\n    datumTokenizer: function datumTokenizer(datum) {\n        return [datum.name];\n    },\n    queryTokenizer: function queryTokenizer(query) {\n        var tokens = query.split(\",\");\n        tokens = [tokens[tokens.length - 1].trim()];\n        return tokens;\n    },\n    remote: {\n        url: getPath() + \"/get_tags_json?q=%QUERY\",\n        wildcard: '%QUERY'\n    }\n});\n\n$(\".form-group #tags\").typeahead(\n    {\n        highlight: true,\n        minLength: 0,\n        hint: true\n    }, {\n        name: \"tags\",\n        display: \"name\",\n        source: function source(query, cb, asyncResults) {\n            return sourceSplit(query, cb, \",\", tags);\n        }\n    }\n);\n\nvar languages = new Bloodhound({\n    name: \"languages\",\n    datumTokenizer: function datumTokenizer(datum) {\n        return [datum.name];\n    },\n    queryTokenizer: function queryTokenizer(query) {\n        return [query];\n    },\n    remote: {\n        url: getPath() + \"/get_languages_json?q=%QUERY\",\n        wildcard: '%QUERY'\n        /*replace: function replace(url, query) {\n            return url + encodeURIComponent(query);\n        }*/\n    }\n});\n\n$(\".form-group #languages\").typeahead(\n    {\n        highlight: true, minLength: 0,\n        hint: true\n    }, {\n        name: \"languages\",\n        display: \"name\",\n        source: function source(query, cb, asyncResults) {\n            return sourceSplit(query, cb, \",\", languages);\n        }\n    }\n);\n\nvar publishers = new Bloodhound({\n    name: \"publisher\",\n    datumTokenizer: function datumTokenizer(datum) {\n        return [datum.name];\n    },\n    queryTokenizer: Bloodhound.tokenizers.whitespace,\n    remote: {\n        url: getPath() + \"/get_publishers_json?q=%QUERY\",\n        wildcard: '%QUERY'\n    }\n});\n\n$(\".form-group #publisher\").typeahead(\n    {\n        highlight: true, minLength: 0,\n        hint: true\n    }, {\n        name: \"publishers\",\n        displayKey: \"name\",\n        source: publishers\n    }\n);\n\n$(\"#search\").on(\"change input.typeahead:selected\", function(event) {\n    if (event.target.type === \"search\" && event.target.tagName === \"INPUT\") {\n        return;\n    }\n    var form = $(\"form\").serialize();\n    $.getJSON( getPath() + \"/get_matching_tags\", form, function( data ) {\n        $(\".tags_click\").each(function() {\n            if ($.inArray(parseInt($(this).val(), 10), data.tags) === -1) {\n                if (!$(this).prop(\"selected\")) {\n                    $(this).prop(\"disabled\", true);\n                }\n            } else {\n                $(this).prop(\"disabled\", false);\n            }\n        });\n        $(\"#include_tag option:selected\").each(function () {\n            $(\"#exclude_tag\").find(\"[value=\" + $(this).val() + \"]\").prop(\"disabled\", true);\n        });\n        $(\"#include_tag\").selectpicker(\"refresh\");\n        $(\"#exclude_tag\").selectpicker(\"refresh\");\n    });\n});\n\n$(\"#btn-upload-format\").on(\"change\", function () {\n    var filename = $(this).val();\n    if (filename.substring(3, 11) === \"fakepath\") {\n        filename = filename.substring(12);\n    } // Remove c:\\fake at beginning from localhost chrome\n    $(\"#upload-format\").text(filename);\n});\n\n$(\"#btn-upload-cover\").on(\"change\", function () {\n    var filename = $(this).val();\n    if (filename.substring(3, 11) === \"fakepath\") {\n        filename = filename.substring(12);\n    } // Remove c:\\fake at beginning from localhost chrome\n    $(\"#upload-cover\").text(filename);\n});\n\n$(\"#xchange\").click(function () {\n    this.blur();\n    var title = $(\"#book_title\").val();\n    $(\"#book_title\").val($(\"#bookAuthor\").val());\n    $(\"#bookAuthor\").val(title);\n});\n\n", "code_before": "/**\n * Created by SpeedProg on 05.04.2015.\n */\n/* global Bloodhound, language, Modernizr, tinymce, getPath */\n\nif ($(\"#description\").length) {\n    tinymce.init({\n        selector: \"#description\",\n        plugins: 'code',\n        branding: false,\n        menubar: \"edit view format\",\n        language: language\n    });\n}\n\nif ($(\".tiny_editor\").length) {\n    tinymce.init({\n        selector: \".tiny_editor\",\n        plugins: 'code',\n        branding: false,\n        menubar: \"edit view format\",\n        language: language\n    });\n}\n\n$(\".datepicker\").datepicker({\n    format: \"yyyy-mm-dd\",\n    language: language\n}).on(\"change\", function () {\n    // Show localized date over top of the standard YYYY-MM-DD date\n    var pubDate;\n    var results = /(\\d{4})[-\\/\\\\](\\d{1,2})[-\\/\\\\](\\d{1,2})/.exec(this.value); // YYYY-MM-DD\n    if (results) {\n        pubDate = new Date(results[1], parseInt(results[2], 10) - 1, results[3]) || new Date(this.value);\n        $(this).next('input')\n            .val(pubDate.toLocaleDateString(language))\n            .removeClass(\"hidden\");\n    }\n}).trigger(\"change\");\n\n$(\".datepicker_delete\").click(function() {\n    var inputs = $(this).parent().siblings('input');\n    $(inputs[0]).data('datepicker').clearDates();\n    $(inputs[1]).addClass('hidden');\n});\n\n\n/*\nTakes a prefix, query typeahead callback, Bloodhound typeahead adapter\n and returns the completions it gets from the bloodhound engine prefixed.\n */\nfunction prefixedSource(prefix, query, cb, source) {\n    function async(retArray) {\n        retArray = retArray || [];\n        var matches = [];\n        for (var i = 0; i < retArray.length; i++) {\n            var obj = {name : prefix + retArray[i].name};\n            matches.push(obj);\n        }\n        cb(matches);\n    }\n    source.search(query, cb, async);\n}\n\nfunction sourceSplit(query, cb, split, source) {\n    var tokens = query.split(split);\n    var currentSource = tokens[tokens.length - 1].trim();\n\n    tokens.splice(tokens.length - 1, 1); // remove last element\n    var prefix = \"\";\n    var newSplit;\n    if (split === \"&\") {\n        newSplit = \" \" + split + \" \";\n    } else {\n        newSplit = split + \" \";\n    }\n    for (var i = 0; i < tokens.length; i++) {\n        prefix += tokens[i].trim() + newSplit;\n    }\n    prefixedSource(prefix, currentSource, cb, source);\n}\n\nvar authors = new Bloodhound({\n    name: \"authors\",\n    identify: function(obj) { return obj.name; },\n    datumTokenizer: function datumTokenizer(datum) {\n        return [datum.name];\n    },\n    queryTokenizer: Bloodhound.tokenizers.whitespace,\n    remote: {\n        url: getPath() + \"/get_authors_json?q=%QUERY\",\n        wildcard: '%QUERY',\n    },\n});\n\n$(\".form-group #bookAuthor\").typeahead(\n    {\n        highlight: true,\n        minLength: 1,\n        hint: true\n    }, {\n        name: \"authors\",\n        display: 'name',\n        source: function source(query, cb, asyncResults) {\n            return sourceSplit(query, cb, \"&\", authors);\n        }\n    }\n);\n\n\nvar series = new Bloodhound({\n    name: \"series\",\n    datumTokenizer: function datumTokenizer(datum) {\n        return [datum.name];\n    },\n    // queryTokenizer: Bloodhound.tokenizers.whitespace,\n    queryTokenizer: function queryTokenizer(query) {\n        return [query];\n    },\n    remote: {\n        url: getPath() + \"/get_series_json?q=%QUERY\",\n        wildcard: '%QUERY',\n        /*replace: function replace(url, query) {\n            return url + encodeURIComponent(query);\n        }*/\n    }\n});\n$(\".form-group #series\").typeahead(\n    {\n        highlight: true,\n        minLength: 0,\n        hint: true\n    }, {\n        name: \"series\",\n        displayKey: \"name\",\n        source: series\n    }\n);\n\nvar tags = new Bloodhound({\n    name: \"tags\",\n    datumTokenizer: function datumTokenizer(datum) {\n        return [datum.name];\n    },\n    queryTokenizer: function queryTokenizer(query) {\n        var tokens = query.split(\",\");\n        tokens = [tokens[tokens.length - 1].trim()];\n        return tokens;\n    },\n    remote: {\n        url: getPath() + \"/get_tags_json?q=%QUERY\",\n        wildcard: '%QUERY'\n    }\n});\n\n$(\".form-group #tags\").typeahead(\n    {\n        highlight: true,\n        minLength: 0,\n        hint: true\n    }, {\n        name: \"tags\",\n        display: \"name\",\n        source: function source(query, cb, asyncResults) {\n            return sourceSplit(query, cb, \",\", tags);\n        }\n    }\n);\n\nvar languages = new Bloodhound({\n    name: \"languages\",\n    datumTokenizer: function datumTokenizer(datum) {\n        return [datum.name];\n    },\n    queryTokenizer: function queryTokenizer(query) {\n        return [query];\n    },\n    remote: {\n        url: getPath() + \"/get_languages_json?q=%QUERY\",\n        wildcard: '%QUERY'\n        /*replace: function replace(url, query) {\n            return url + encodeURIComponent(query);\n        }*/\n    }\n});\n\n$(\".form-group #languages\").typeahead(\n    {\n        highlight: true, minLength: 0,\n        hint: true\n    }, {\n        name: \"languages\",\n        display: \"name\",\n        source: function source(query, cb, asyncResults) {\n            return sourceSplit(query, cb, \",\", languages);\n        }\n    }\n);\n\nvar publishers = new Bloodhound({\n    name: \"publisher\",\n    datumTokenizer: function datumTokenizer(datum) {\n        return [datum.name];\n    },\n    queryTokenizer: Bloodhound.tokenizers.whitespace,\n    remote: {\n        url: getPath() + \"/get_publishers_json?q=%QUERY\",\n        wildcard: '%QUERY'\n    }\n});\n\n$(\".form-group #publisher\").typeahead(\n    {\n        highlight: true, minLength: 0,\n        hint: true\n    }, {\n        name: \"publishers\",\n        displayKey: \"name\",\n        source: publishers\n    }\n);\n\n$(\"#search\").on(\"change input.typeahead:selected\", function(event) {\n    if (event.target.type === \"search\" && event.target.tagName === \"INPUT\") {\n        return;\n    }\n    var form = $(\"form\").serialize();\n    $.getJSON( getPath() + \"/get_matching_tags\", form, function( data ) {\n        $(\".tags_click\").each(function() {\n            if ($.inArray(parseInt($(this).val(), 10), data.tags) === -1) {\n                if (!$(this).prop(\"selected\")) {\n                    $(this).prop(\"disabled\", true);\n                }\n            } else {\n                $(this).prop(\"disabled\", false);\n            }\n        });\n        $(\"#include_tag option:selected\").each(function () {\n            $(\"#exclude_tag\").find(\"[value=\" + $(this).val() + \"]\").prop(\"disabled\", true);\n        });\n        $(\"#include_tag\").selectpicker(\"refresh\");\n        $(\"#exclude_tag\").selectpicker(\"refresh\");\n    });\n});\n\n$(\"#btn-upload-format\").on(\"change\", function () {\n    var filename = $(this).val();\n    if (filename.substring(3, 11) === \"fakepath\") {\n        filename = filename.substring(12);\n    } // Remove c:\\fake at beginning from localhost chrome\n    $(\"#upload-format\").html(filename);\n});\n\n$(\"#btn-upload-cover\").on(\"change\", function () {\n    var filename = $(this).val();\n    if (filename.substring(3, 11) === \"fakepath\") {\n        filename = filename.substring(12);\n    } // Remove c:\\fake at beginning from localhost chrome\n    $(\"#upload-cover\").html(filename);\n});\n\n$(\"#xchange\").click(function () {\n    this.blur();\n    var title = $(\"#book_title\").val();\n    $(\"#book_title\").val($(\"#bookAuthor\").val());\n    $(\"#bookAuthor\").val(title);\n});\n\n", "patch": "@@ -248,15 +248,15 @@ $(\"#btn-upload-format\").on(\"change\", function () {\n     if (filename.substring(3, 11) === \"fakepath\") {\n         filename = filename.substring(12);\n     } // Remove c:\\fake at beginning from localhost chrome\n-    $(\"#upload-format\").html(filename);\n+    $(\"#upload-format\").text(filename);\n });\n \n $(\"#btn-upload-cover\").on(\"change\", function () {\n     var filename = $(this).val();\n     if (filename.substring(3, 11) === \"fakepath\") {\n         filename = filename.substring(12);\n     } // Remove c:\\fake at beginning from localhost chrome\n-    $(\"#upload-cover\").html(filename);\n+    $(\"#upload-cover\").text(filename);\n });\n \n $(\"#xchange\").click(function () {", "file_path": "files/2022_1/475", "file_language": "js", "file_name": "cps/static/js/edit_books.js", "outdated_file_modify": 0, "outdated_file_before": 0, "outdated_file_after": 0}], "outdated": 0, "cwe_descripiton": "", "cwe_consequence": "", "cwe_method": "", "cwe_solution": ""}
